FROM golang:1.17.2
ENV GO111MODULE=on
ENV GOPROXY="https://goproxy.io"
ENV JAEGER_DISABLED=false
ENV JAEGER_SAMPLER_TYPE="const"
ENV JAEGER_SAMPLER_PARAM=1
ENV JAEGER_REPORTER_LOG_SPANS=true
ENV JAEGER_AGENT_HOST="172.22.0.1"
ENV JAEGER_AGENT_PORT=6831
WORKDIR $GOPATH/src/easy_note
COPY . $GOPATH/src/easy_note
WORKDIR $GOPATH/src/easy_note/cmd/api
RUN ./run.sh
RUN go build -o main .
EXPOSE 8080
ENTRYPOINT ["./main"]